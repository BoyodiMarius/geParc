<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ax="http://www.artp.tg/composant"
      class="no-js" lang="">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Véhicules</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta name="description" content=""/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="apple-touch-icon" href="apple-touch-icon.png"/>  
        <h:outputStylesheet name="./assets/css/bootstrap.min.css"/>
        <h:outputStylesheet name="./assets/css/plugins.css"/>
        <h:outputStylesheet name="./assets/css/lato-webfont.css"/>
        <h:outputStylesheet name="./assets/css/magnific-popup.css"/>
        <!--Theme custom css -->
        <h:outputStylesheet name="./assets/css/style.css"/>
        <!--Theme Responsive css-->
        <h:outputStylesheet name="./assets/css/responsive.css"/>
        <h:outputStylesheet name="./css/default.css"/>
        <h:outputStylesheet name="./css/cssLayout.css"/>

    </h:head>

    <h:body>
        <h:form id="vehicule" styleClass="vehicule" enctype="multipart/form-data">
            <ui:include src="dlgAffichePdf.xhtml" />
            <!-- EN TETE -->
            <nav class="navbar navbar-default navbar-fixed-top">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#"><img src="resources/assets/images/logoGesparc.png" alt="" /></a>
                    </div>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1" >
                        <ul class="nav navbar-nav navbar-right" id="nav" style="min-height: 100px;">
                            <li style="display: #{geParcUtils.disPlay(permissionManagedBean.isActiveGeparcAccueil)}" ><a href="Menu.xhtml">Accueil</a></li>
                            <li class="active" style="display: #{geParcUtils.disPlay(permissionManagedBean.isActiveGeparcParc)}"><a href="parametres.xhtml" style="width: 185px;" >Gestion du Parc </a></li>
                            <!--<li><a href="Alertes.xhtml" style="margin-left: 30px; margin-right: 30px;" > &nbsp; Alertes <h:outputText value="#{alertesMBean.info2}" style="color: red"/> </a></li>-->
                            <li style="display: #{geParcUtils.disPlay(permissionManagedBean.isActiveGeparcAlertes)}"><a href="Alertes.xhtml" style="margin-left: 30px; margin-right: 30px;" > &nbsp;<h:outputText value="ALERTES" /><h:outputText value="#{alertesMBean.info2}" style="color: red" /> </a></li>
                            <li style="display: #{geParcUtils.disPlay(permissionManagedBean.isActiveGeparcStatistiques)}" ><a href="Statistiques.xhtml" style="margin-left: 55px; margin-right: 55px;" > Statistiques </a></li>
                            <li style="display: #{geParcUtils.disPlay(permissionManagedBean.isActiveGeparcAdministration)}"><a href="Administration.xhtml" style="margin-left: 70px; margin-right: 70px;"> Administration</a></li>
                            <li ><a style="margin-left: 220px;" > <center> <p:commandButton  icon="ui-icon-power"  action="#{logoutMBean.deconnexion()}"  ajax="false" /> </center> </a></li>
                            <li ><center> <p:outputLabel value="#{loginMBean.info}" style="margin-left: 200px; margin-right: 250px; margin-top: 25px; color: white;" /> </center> </li>
                            <li >      </li>
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav>
            <!-- CORPS -->
            <p:layout fullPage="true" styleClass="nav navbar-nav navbar-right" rendered="#{permissionManagedBean.isActiveGeparcParc}" >
                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">

                </p:layoutUnit>
                <p:layoutUnit position="west" size="175"  >
                    <p:megaMenu >  
                        <p:menuitem style="width:160px" value="Véhicule" url="Vehicule.xhtml" icon="ui-icon-star" /> 
                    </p:megaMenu>
                    <p:megaMenu >  
                        <p:menuitem style="width:160px" value="Affectation" url="Affectation.xhtml" icon="ui-icon-document" />
                    </p:megaMenu>
                    <p:megaMenu >  
                        <p:menuitem style="width:160px" value="Opération sur véhicule" url="Operation.xhtml" icon="ui-icon-circle-plus" />
                    </p:megaMenu>

                </p:layoutUnit>



                <p:layoutUnit position="center">
                    <center>
                        <p:fieldset legend="VEHICULE" styleClass="fieldVehicule">
                            <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />

                            <p:wizard widgetVar="wiz" showNavBar="false" flowListener="#{vehiculeMBean.handleFlow}" styleClass="wizard" id="wizard">
                                <p:tab title="1" id="vehicule">
                                    <center>

                                        <table >
                                            <tr>
                                            <p:outputLabel value="CHOIX DU MODELE" style="font-size: 30px; color: #999"/>
                                            </tr>
                                            <tr>

                                                <td >
                                            <h:panelGrid id="gridVehicule2" styleClass="gridVehicule2" columns="1" cellspacing="10" cellpadding="10">
                                                <p:outputLabel for="marque" value="Marque "/>
                                                <p:selectOneListbox id="marque" value="#{vehiculeMBean.marques}" scrollHeight="150" filter="true"  converter="omnifaces.SelectItemsConverter" styleClass="marque" style="width:150px; height: 180px"  >
                                                    <f:selectItems value="#{modeleMBean.listeMarque}" var="ls" itemLabel="#{ls.libelleMarque}" itemValue="#{ls}" />
                                                    <p:ajax event="change" process="@this @(.typeVehicule, .marque, .modele)"  update="@(.fieldAjoutModele, .gridVehicule3,  .vehiculeParc, .modele)" listener="#{vehiculeMBean.filtrer()}" />
                                                </p:selectOneListbox>
                                                <p:commandButton style="width:150px;" value="Ajouter" icon="ui-icon-plus" onclick="PF('marqueDlg').show()"/>
                                                <p:message for="marque" display="icon"/>
                                            </h:panelGrid> 
                                            </td>



                                            <td width="8%">
                                                <br/>
                                            </td>

                                            <td>
                                            <h:panelGrid id="gridVehicule1" styleClass="gridVehicule1" columns="1" cellspacing="10" cellpadding="10">
                                                <p:outputLabel for="typeVehicule" value="Type de véhicule"/>
                                                <p:selectOneListbox id="typeVehicule" value="#{vehiculeMBean.typeVehicules}" scrollHeight="150" filter="true" converter="omnifaces.SelectItemsConverter" styleClass="typeVehicule"  style="width:150px; height: 180px">
                                                    <f:selectItems value="#{modeleMBean.listeTypeVehicule}" var="l" itemLabel="#{l.libelleTypeVehicule}" itemValue="#{l}"/>
                                                    <p:ajax event="change"  process="@this @(.typeVehicule, .marque, .modele)"  update="@(.gridVehicule3, .fieldAjoutModele, .vehiculeParc, .modele)" listener="#{vehiculeMBean.filtrer()}"/>
                                                </p:selectOneListbox>
                                                <p:commandButton style="width:150px;" icon="ui-icon-plus" value="Ajouter" onclick="PF('typeVehiculeDlg').show()"/>
                                                <p:message for="typeVehicule" display="icon"/>
                                            </h:panelGrid> 
                                            </td>

                                            <td width="8%">
                                                <br/>
                                            </td>
                                            <td>
                                            <h:panelGrid id="gridVehicule3" styleClass="gridVehicule3" columns="1" cellspacing="10" cellpadding="10">
                                                <p:outputLabel for="modele" value="Modèle "/>
                                                <p:selectOneListbox id="modele" value="#{vehiculeMBean.idModele}"  scrollHeight="120" label="Modèle" var="t" filter="true"   converter="omnifaces.SelectItemsConverter" styleClass="modele" style="width:200px; height: 150px">
                                                    <f:selectItems value="#{vehiculeMBean.listeModeleFiltre}" var="modele" itemLabel="#{modele.designation}" itemValue="#{modele}"/>
                                                    <p:ajax event="change" process="@this @(.typeVehicule, .marque, .modele)"  update="@(.vehiculeParc)" listener="#{vehiculeMBean.filtrer()}"/>
                                                    <p:column>
                                                        <h:outputText value="#{t.designation}" />
                                                    </p:column>
                                                </p:selectOneListbox>
                                                <h:panelGrid  columns="2" >
                                                    <p:commandButton disabled="#{vehiculeMBean.newModele}" style="size: 50px; width: 100px; background: #088; color: white"  icon="ui-icon-plus" value="Ajouter" action="#{vehiculeMBean.nouveauModele()}"/>
                                                    <p:commandButton disabled="#{vehiculeMBean.newModele}" style="size: 50px; width: 100px; background: #999; color: white"  icon="ui-icon-plus" value="Modifier" onclick="PF('modeleDlg').show()"/>
                                                    <!--<p:commandButton  style="size: 50px; width: 100px"  icon="ui-icon-moins" value="Retirer" onclick="PF('totalVehiculeDlg').show()"/>   -->
                                                </h:panelGrid>

                                                <p:commandButton style="size: 50px; width: 200px" value="AJOUTER AU PARC" icon="ui-icon-arrow-1-e" actionListener="#{vehiculeMBean.handleFlow}" iconPos="right" type="button" onclick="PF('wiz').next();" />
                                                <p:message for="modele" display="icon"/>
                                            </h:panelGrid> 
                                            </td>
                                            <td width="8%">
                                                <br/>
                                            </td>
                                            <td>
                                            <h:panelGrid id="gridVehicule" columns="1" cellspacing="10" cellpadding="10">
                                                <p:outputLabel for="vehiculeParc" value="Véhicule du parc"/>
                                                <p:selectOneListbox id="vehiculeParc" value="#{vehiculeMBean.selectObject}"  scrollHeight="120" label="Modèle" var="vp" filter="true"   converter="omnifaces.SelectItemsConverter" styleClass="vehiculeParc" style="width:200px; height: 150px">
                                                    <f:selectItems value="#{vehiculeMBean.listeFiltreVehicule}" var="veh" itemLabel="#{veh.immatriculation}" itemValue="#{veh}"/>
                                                    <p:ajax event="change" process="@this @(.vehiculeParc)" update="@(.fieldVehicule)"  listener="#{vehiculeMBean.activation()}"/>
                                                    <p:column>
                                                        <h:outputText value="#{vp.immatriculation}" />
                                                    </p:column>
                                                </p:selectOneListbox>
                                                <h:panelGrid  columns="2" >
                                                    <p:commandButton disabled="#{vehiculeMBean.desactivation}" style="size: 50px; width: 100px; background: #088; color: white"  icon="ui-icon-plus" value="Modifier" actionListener="#{vehiculeMBean.modiSuivant()}"   />
                                                    <p:commandButton  disabled="#{vehiculeMBean.desactivation}" style="size: 50px; width: 100px; background: #843534; color: white" ajax="false" update="@(.wizard)"  actionListener="#{vehiculeMBean.retirer()}" value="Retirer" icon="ui-icon-trash" /> 
                                                    <!--<p:commandButton  style="size: 50px; width: 100px"  icon="ui-icon-moins" value="Retirer" onclick="PF('totalVehiculeDlg').show()"/>-->
                                                </h:panelGrid>
                                                <h:panelGrid columns="1">
                                                    <p:commandButton  style="size: 50px; width: 200px"  icon="ui-icon-document" value="Liste des véhicule" onclick="PF('totalVehiculeDlg').show()"/> 
                                                </h:panelGrid>
                                                <p:message for="vehiculeParc" display="icon"/>
                                            </h:panelGrid> 
                                            </td>
                                            </tr>

                                        </table>
                                    </center>
                                    <div >
                                        <center>
                                            <br/>
                                            <br/>
                                            <br/>
                                            <p:commandButton value="Réinitialiser" icon="ui-icon-refresh" actionListener="#{vehiculeMBean.rafraichir()}" iconPos="right" />
                                            <br/>
                                            <br/>
                                            <br/>
                                            <br/>
                                        </center>
                                    </div>
                                </p:tab>
                                <p:tab title="2"   id="infos">
                                    <center>
                                        <table>
                                            <tr>
                                            <p:outputLabel value="INFORMATIONS DU VEHICULE" style="font-size: 30px; color: #999"/>
                                            </tr>
                                            <tr>
                                                <td>
                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="Type de véhicule :  " style="font-size: 14px; font-weight: bold;"/>
                                                <h:outputText style="font-size: 14px; font-weight: bold; color: #843534;" value=" #{vehiculeMBean.idModele.idTypeVehicule.libelleTypeVehicule}"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value="Marque : " style="font-size: 14px; font-weight: bold;"/>
                                                <h:outputText style="font-size: 14px; font-weight: bold; color: #843534;" value=" #{vehiculeMBean.idModele.idMarque.libelleMarque}"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value="Modèle : " style="font-size: 14px; font-weight: bold;"/>
                                                <h:outputText style="font-size: 14px; font-weight: bold; color: #843534;" value=" #{vehiculeMBean.idModele.designation}"/>
                                            </h:panelGrid>  
                                            </td>
                                            <td width="3%">
                                                <br/>
                                            </td>
                                            <td>
                                            <h:panelGrid id="gridVehicule4" columns="3" cellspacing="10" cellpadding="10">
                                                <p:outputLabel for="numeroChassis" value="N°de chassis :"/>
                                                <p:inputText disabled="#{vehiculeMBean.griserChamp}" id="numeroChassis" style="background: #ffffff" styleClass="numeroChassis"  value="#{vehiculeMBean.numeroChassis}"  />
                                                <p:message for="numeroChassis" display="icon"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel for="immatriculation" value="N° d'immatriculation :"/>
                                                <p:inputText  id="immatriculation" style="background: #ffffff" styleClass="immatriculation"  value="#{vehiculeMBean.immatriculation}"  />
                                                <p:message for="immatriculation" display="icon"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel for="couleur" value="Couleur :"/>
                                                <p:inputText id="couleur" style="background: #ffffff" styleClass="couleur"  value="#{vehiculeMBean.couleur}"  />
                                                <p:message for="couleur" display="icon"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel for="paramAmortissement" value="Paramètre Amortissement :"/>
                                                <p:inputText id="paramAmortissement" style="background: #ffffff" styleClass="paramAmortissement"  value="#{vehiculeMBean.paramAmortissement}"  />
                                                <p:message for="paramAmortissement" display="icon"/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel  for="kilometrageActuel" value="Kilométrage actuel :"/>
                                                <p:inputText disabled="#{vehiculeMBean.griserChamp}" id="kilometrageActuel" style="background: #ffffff" styleClass="kilometrageActuel"  value="#{vehiculeMBean.kilometrageActuel}"  />
                                                <p:message for="kilometrageActuel" display="icon"/>
                                            </h:panelGrid>
                                            </td>
                                            <td width="3%">
                                                <br/>
                                            </td>
                                            <td>
                                            <h:panelGrid id="gridVehicule5" columns="2" cellspacing="10" cellpadding="10">
                                                <p:outputLabel  value="Image avant :"/>
                                                <p:fileUpload  value="#{vehiculeMBean.image1}" mode="simple"  />
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel  value="Image Arrière :"/>
                                                <p:fileUpload  value="#{vehiculeMBean.image2}" mode="simple"  />
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel  value="Image Droite :"/>
                                                <p:fileUpload  value="#{vehiculeMBean.image3}" mode="simple"  />
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel  value="Image Gauche :"/>
                                                <p:fileUpload   value="#{vehiculeMBean.image4}" mode="simple"  />
                                                <p:outputLabel value=""/>
                                                <p:outputLabel value=""/>
                                                <p:outputLabel  value="Image intérieur :"/>
                                                <p:fileUpload  value="#{vehiculeMBean.image5}" mode="simple"  />
                                            </h:panelGrid>
                                            </td>
                                            </tr>
                                            <tr>
                                            <br/>
                                            <h:panelGrid id="gridVehicule6" columns="6" cellspacing="10" cellpadding="10">
                                                <br/><br/><br/>
                                                <p:commandButton  style="margin-right: 8px; background: #4bcaff; color: white" ajax="false"  actionListener="#{vehiculeMBean.enregistrer()}" value="Valider" icon="ui-icon-disk" />
                                                <br/><br/>
                                                <p:commandButton  style="margin-right: 8px; background: #999; color: white" ajax="false" actionListener="#{vehiculeMBean.rafraichir()}"  value="Annuler"  />
                                                <br/><br/>
                                                <p:commandButton disabled="#{vehiculeMBean.desactiver}" style="margin-right: 8px; background: #843534; color: white" ajax="false"  actionListener="#{vehiculeMBean.retirer()}" value="Retirer" icon="ui-icon-trash" />
                                            </h:panelGrid>
                                            </tr>
                                        </table>
                                    </center>

                                    <div >
                                        <center>
                                            <br/>
                                            <p:commandButton   value="Précédent" icon="ui-icon-arrow-1-w" actionListener="#{vehiculeMBean.handleFlow}" iconPos="left" type="button" onclick="PF('wiz').back();" />
                                        </center>
                                    </div>

                                </p:tab>
                            </p:wizard>
                        </p:fieldset>
                    </center>

                </p:layoutUnit>
            </p:layout>
            
            

            <ax:succesDialog widgetVar="succesOperationAjout" title="Succes"
                             msg1="#{vehiculeMBean.message1}" >
                <div style="margin-top: 10px; text-align: center">
                    <p:commandButton   value="OK" style="width: 100px" update="@(.fieldAjoutModele, .classModeleAjout)"
                                       actionListener="#{vehiculeMBean.fermer()}"  />
                </div>
            </ax:succesDialog>
            <ax:succesDialog widgetVar="succesOperationVehicule" title="Succes"
                             msg1="#{vehiculeMBean.message}" >
                <div style="margin-top: 10px; text-align: center">
                    <p:commandButton process="@none"  value="OK" style="width: 100px"
                                     onclick="PF('succesOperationVehicule').hide()"  />
                </div>
            </ax:succesDialog>

            <ax:confirmDialog title="Confirmation" msg1="Êtes-vous sûr(e) de vouloir effectuer l'enregistrement?" widgetVar="confirmerEnregistrementVehicule" >
                <div style="margin-top: 10px; text-align: right">
                    <p:commandButton value="Oui" update="@(.fieldVehicule, .classVehicule)" actionListener="#{vehiculeMBean.enregistrer()}" 
                                     onclick="PF('confirmerEnregistrementVehicule').hide();" style="size: 90px;"/>
                    <p:commandButton value="Non" update="@(.fieldVehicule, .classVehicule)" actionListener="#{vehiculeMBean.rafraichir()}"  onclick="PF('confirmerEnregistrementVehicule').hide();" style="margin-left: 5px;size: 90px;"/>
                </div>
            </ax:confirmDialog>
            <ax:confirmDialog title="Confirmation" msg1="Êtes-vous sûr(e) de vouloir effectuer la suppression?" widgetVar="confirmerSuppressionVehicule" >
                <div style="margin-top: 10px; text-align: right">
                    <p:commandButton value="Oui" update="@(.fieldVehicule, .classVehicule)" actionListener="#{vehiculeMBean.supprimer()}" 
                                     onclick="PF('confirmerSuppressionVehicule').hide();" style="size: 90px;"/>
                    <p:commandButton value="Non" update="@(.fieldVehicule, .classVehicule)" actionListener="#{vehiculeMBean.rafraichir()}" onclick="PF('confirmerSuppressionVehicule').hide();" style="margin-left: 5px;size: 90px;"/>
                </div>
            </ax:confirmDialog>
            <ax:errorDialog widgetVar="errorOperationVehicule" title="ERREUR" 
                            msg1="#{vehiculeMBean.message}" >
                <div style="margin-top: 10px; text-align: center">
                    <p:commandButton process="@none" value="OK" style="width: 100px"
                                     onclick="PF('errorOperationVehicule').hide()"  />
                </div>
            </ax:errorDialog>


            <ax:succesDialog widgetVar="succesOperationModele" title="Succes"
                             msg1="#{modeleMBean.message}" >
                <div style="margin-top: 10px; text-align: center">
                    <p:commandButton process="@none"  value="OK" style="width: 100px" update="@(.fieldModele, .classModele)" actionListener="#{vehiculeMBean.rafraichir()}" 
                                     onclick="PF('succesOperationModele').hide()"  />
                </div>
            </ax:succesDialog>

            <ax:confirmDialog title="Confirmation" msg1="Êtes-vous sûr(e) de vouloir effectuer l'enregistrement?" widgetVar="confirmerEnregistrementModele" >
                <div style="margin-top: 10px; text-align: right">
                    <p:commandButton value="Oui" update="@(.fieldModele, .classModele)" actionListener="#{modeleMBean.enregistrer()}" 
                                     onclick="PF('confirmerEnregistrementModele').hide();" style="size: 90px;"/>
                    <p:commandButton value="Non" update="@(.fieldModele, .classModele)" actionListener="#{modeleMBean.rafraichir()}"  onclick="PF('confirmerEnregistrementModele').hide();" style="margin-left: 5px;size: 90px;"/>
                </div>
            </ax:confirmDialog>
            <ax:confirmDialog title="Confirmation" msg1="Êtes-vous sûr(e) de vouloir effectuer la suppression?" widgetVar="confirmerSuppressionModele" >
                <div style="margin-top: 10px; text-align: right">
                    <p:commandButton value="Oui" update="@(.fieldModele, .classModele)" actionListener="#{modeleMBean.supprimer()}" 
                                     onclick="PF('confirmerSuppressionModele').hide();" style="size: 90px;"/>
                    <p:commandButton value="Non" update="@(.fieldModele, .classModele)" actionListener="#{modeleMBean.rafraichir()}" onclick="PF('confirmerSuppressionModele').hide();" style="margin-left: 5px;size: 90px;"/>
                </div>
            </ax:confirmDialog>
            <ax:errorDialog widgetVar="errorOperationModele" title="ERREUR" 
                            msg1="#{modeleMBean.message}" >
                <div style="margin-top: 10px; text-align: center">
                    <p:commandButton process="@none" value="OK" style="width: 100px" update="@(.fieldModele, .classModele)"
                                     onclick="PF('errorOperationModele').hide()"  />
                </div>
            </ax:errorDialog>


        </h:form>

        <p:dialog widgetVar="visualiserDlg" width="500" height="300" closable="true" header="Les images du véhicule" draggable="true" id="visualiserDlg" modal="true">
            <h:form enctype="multipart/form-data">
                <center>
                    <!--<p:commandButton actionListener="#vehiculeMBean.test()}" update="@(.fieldImage)" value="Charger les images"/>-->
                    <p:fieldset styleClass="fieldImage">
                        <p:imageSwitch effect="fade" id="fadeEffect" >
                            <ui:repeat value="#{vehiculeMBean.imagesVisualiser}" var="image" id="fadeEffectImages"  >
                                <p:graphicImage name="/assets/images/imagesDesVehicules/#{image}" id="image"/>
                            </ui:repeat>
                        </p:imageSwitch>

                    </p:fieldset>
                </center>
            </h:form>

        </p:dialog>

        <p:dialog widgetVar="totalVehiculeDlg" width="1350" height="445" closable="true"  header="Liste des véhicules du parc" draggable="true" id="totalVehiculeDlg" modal="true" resizable="false">
            <h:form>
                <center>
                    <!--<p:commandButton  style="margin-right: 8px; background: #088; color: white" update="@(.fieldImage)" icon="ui-icon-plus" value="Visualiser" onclick="PF('visualiserDlg').show()"/>-->
                    <p:fieldset id="listeVehiculeParc"  styleClass="listeVehiculeParc" >
                        <p:dataTable var="f" value="#{vehiculeMBean.listeVehicule}" 
                                     selection="#{vehiculeMBean.selectObject}" rowKey="#{f.idVehicule}"
                                     emptyMessage="Aucun vehicule" selectionMode="single"
                                     rows="10" scrollable="false"  paginator="true" paginatorPosition="top" 
                                     styleClass="classVehicule">
                            <p:ajax event="rowDblselect" update="@(.fieldImage)" listener="#{vehiculeMBean.test()}" />
                            <f:facet name="header">
                                <h:outputText value="LISTE DES VEHICULES"/>
                            </f:facet>
                            <p:column filterBy="#{f.idModele.idTypeVehicule.libelleTypeVehicule}" sortBy="#{f.idModele.idTypeVehicule.libelleTypeVehicule}" >
                                <f:facet name="header"> <h:outputText value=" Type de vehicule"/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.idModele.idTypeVehicule.libelleTypeVehicule}"  ></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.idModele.idMarque.libelleMarque}" sortBy="#{f.idModele.idMarque.libelleMarque}" >
                                <f:facet name="header"> <h:outputText value=" Marque"/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.idModele.idMarque.libelleMarque}"></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.idModele.designation}" sortBy="#{f.idModele.designation}" >
                                <f:facet name="header"> <h:outputText value=" Modèle"/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.idModele.designation}"></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.numeroChassis}" sortBy="#{f.numeroChassis}" >
                                <f:facet name="header"> <h:outputText value=" N° de chassis "/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.numeroChassis}"></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.immatriculation}" sortBy="#{f.immatriculation}" >
                                <f:facet name="header"> <h:outputText value="  N° d'immatriculation "/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.immatriculation}"></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.couleur}" sortBy="#{f.couleur}" >
                                <f:facet name="header"> <h:outputText value=" Couleur "/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.couleur}" ></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.kilometrageActuel}" sortBy="#{f.kilometrageActuel}" >
                                <f:facet name="header"> <h:outputText value=" Kilometrage Actuel "/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.kilometrageActuel}" ></h:outputText>
                                </center>
                            </p:column>
                            <p:column filterBy="#{f.parametreAmortissement}" sortBy="#{f.parametreAmortissement}" >
                                <f:facet name="header"> <h:outputText value=" Kilometrage Amortissement"/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.parametreAmortissement}" ></h:outputText>
                                </center>
                            </p:column>
                            <f:facet name="footer">
                                <p:commandButton icon="ui-icon-print" action="#{vehiculeMBean.imprimerListeVehicule()}" title="Imprimer la liste" value="Imprimer la liste" oncomplete="PF('dialogueExport').show()"/>
                            </f:facet>
                        </p:dataTable>
                    </p:fieldset>
                </center>

            </h:form>
            <ui:include src="dlgExport.xhtml" />
        </p:dialog>

        <p:dialog widgetVar="modeleDlg" width="1100" height="445" closable="true"  header="Modifier un modèle" draggable="true" id="modeleDlg" modal="true" resizable="false">
            <h:form>
                <center>
                    <p:fieldset  styleClass="fieldModele" >
                        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
                        <table >
                            <tr>
                                <td>
                            <h:panelGrid id="grid1" columns="1" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="typeVehiculeModele" value="TypeVehicule :"/>
                                <p:selectOneListbox id="typeVehiculeModele" scrollHeight="75" value="#{modeleMBean.idTypeVehicule}" filter="true"   converter="omnifaces.SelectItemsConverter" styleClass="typeVehiculeModele" style="width:175px">
                                    <f:selectItems value="#{modeleMBean.listeTypeVehicule}" var="l" itemLabel="#{l.libelleTypeVehicule}" itemValue="#{l.idTypeVehicule}"/>
                                </p:selectOneListbox>
                                <p:commandButton style="width:175px;" icon="ui-icon-plus" value="Ajouter" onclick="PF('typeVehiculeDlg').show()"/>
                                <p:message for="typeVehiculeModele" display="icon"/>
                            </h:panelGrid>
                            </td>
                            <td width="2%">
                                <br/> 
                            </td>
                            <td>
                            <h:panelGrid id="grid2" columns="1" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="marqueModele" value="Marque :"/>
                                <p:selectOneListbox id="marqueModele" scrollHeight="75" value="#{modeleMBean.idMarque}"   filter="true" converter="omnifaces.SelectItemsConverter" styleClass="marqueModele"  style="width:175px">
                                    <f:selectItems value="#{modeleMBean.listeMarque}" var="lsu" itemLabel="#{lsu.libelleMarque}" itemValue="#{lsu.idMarque}"/>
                                </p:selectOneListbox>
                                <p:commandButton style="width:175px;" value="Ajouter" icon="ui-icon-plus" onclick="PF('marqueDlg').show()"/>
                                <p:message for="marqueModele" display="icon"/>
                            </h:panelGrid>
                            </td>
                            <td width="2%">
                                <br/> 
                            </td>
                            <td>
                            <h:panelGrid id="grid3" columns="1" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="typecarburantModele" value="Type de carburant :"/>
                                <p:selectOneListbox id="typecarburantModele" scrollHeight="75" value="#{modeleMBean.idTypeCarburant}"  filter="true"  converter="omnifaces.SelectItemsConverter" styleClass="typecarburantModele"  style="width:175px">
                                    <f:selectItems value="#{modeleMBean.listeTypeCarburant}" var="ls" itemLabel="#{ls.libelleTypeCarburant}" itemValue="#{ls.idTypeCarburant}"/>
                                </p:selectOneListbox>
                                <p:commandButton style="width:175px;" icon="ui-icon-plus" value="     Ajouter    " onclick="PF('typeCarburantDlg').show()"/>
                                <p:message for="typecarburantModele" display="icon"/>
                            </h:panelGrid>
                            </td>
                            <td width="2%">
                                <br/> 
                            </td>
                            <td>
                            <h:panelGrid id="grid4" columns="3" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="designationModele" value="Désignation :"/>
                                <p:inputText id="designationModele" style="background: #ffffff"  styleClass="designationModele"  value="#{modeleMBean.designation}"  />
                                <p:message for="designationModele" display="icon"/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>
                                <p:outputLabel for="parametreVidangeModele" value="Kilometrage de vidange :"/>
                                <p:inputText id="parametreVidangeModele" style="background: #ffffff"  styleClass="parametreVidangeModele"  value="#{modeleMBean.parametreVidange}" />
                                <p:message for="parametreVidangeModele" display="icon"/>
                            </h:panelGrid>
                            </td>
                            </tr>
                        </table>
                        <br/>
                        <h:panelGrid columns="6">
                            <p:commandButton disabled="#{modeleMBean.desactiver}"  style="margin-right: 8px; background: #4bcaff; color: white"
                            action="#{modeleMBean.confirmerEnregistrement()}" value="Valider" icon="ui-icon-disk" class="btn btn-primary btn-lg"/>
                            <br/><br/>
                            <p:commandButton  style="margin-right: 8px; background: #999; color: white"  update="@(.fieldModele, .classModele)"
                            actionListener="#{modeleMBean.rafraichir()}"  value="Annuler" icon="ui-icon-cancel" class="btn btn-primary btn-lg"/>
                            <br/><br/>
                        </h:panelGrid>
                    </p:fieldset>
                    <p:dataTable var="f" value="#{modeleMBean.listeModele}" 
                                 selection="#{modeleMBean.selectObject}" rowKey="#{f.idModele}"
                                 emptyMessage="Aucun Modele" selectionMode="single"
                                 rows="3" scrollable="false"  paginator="true" paginatorPosition="top" 
                                 styleClass="classModele">
                        <p:ajax event="rowDblselect" update="@(.fieldModele)" listener="#{modeleMBean.rowSelect()}" />
                        <f:facet name="header">
                            <h:outputText value="LISTE DES MODELE"/>
                        </f:facet>
                        <p:column filterBy="#{f.designation}" sortBy="#{f.designation}" >
                            <f:facet name="header"> <h:outputText value=" Désignation "/> </f:facet>
                            <center>
                                <h:outputText value="#{f.designation}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{f.idMarque.libelleMarque}" sortBy="#{f.idMarque.libelleMarque}">
                            <f:facet name="header"> <h:outputText value=" Marque "/> </f:facet>
                            <center>
                                <h:outputText value="#{f.idMarque.libelleMarque}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{f.idTypeVehicule.libelleTypeVehicule}" sortBy="#{f.idTypeVehicule.libelleTypeVehicule}" >
                            <f:facet name="header"> <h:outputText value=" Type de véhicule "/> </f:facet>
                            <center>
                                <h:outputText value="#{f.idTypeVehicule.libelleTypeVehicule}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{f.parametreVidange}" sortBy="#{f.parametreVidange}">
                            <f:facet name="header"> <h:outputText value=" Paramètre vidange "/> </f:facet>
                            <center>
                                <h:outputText value="#{f.parametreVidange}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{f.idTypeCarburant.libelleTypeCarburant}" sortBy="#{f.idTypeCarburant.libelleTypeCarburant}" >
                            <f:facet name="header"> <h:outputText value=" Type de carburant"/> </f:facet>
                            <center>
                                <h:outputText value="#{f.idTypeCarburant.libelleTypeCarburant}" ></h:outputText>
                            </center>
                        </p:column>
                    </p:dataTable>
                    <!--<p:commandButton actionListener="#vehiculeMBean.rafraichir()}" value="FERMER"/>-->
                </center>    

            </h:form>

        </p:dialog>



        <p:dialog widgetVar="ajoutModeleDlg" width="1100" height="445" closable="true"  header="Enregistrement de modele" draggable="true" id="ajoutModeleDlg" modal="true" resizable="false">
            <h:form>
                <center>
                    <p:fieldset  styleClass="fieldAjoutModele" >
                        <p:messages id="messagesAjoutModele" showDetail="true" autoUpdate="true" closable="true" />
                        <table >
                            <tr>
                                <td>
                            <h:panelGrid id="gridAjout1" columns="2" cellspacing="10" cellpadding="10">
                                <p:outputLabel value="Type de véhicule :  " style="font-size: 14px; font-weight: bold;"/>
                                <h:outputText style="font-size: 14px; font-weight: bold; color: #843534;" value=" #{vehiculeMBean.typeVehicules.libelleTypeVehicule}"/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value="Marque : " style="font-size: 14px; font-weight: bold;"/>
                                <h:outputText style="font-size: 14px; font-weight: bold; color: #843534;" value=" #{vehiculeMBean.marques.libelleMarque}"/>
                            </h:panelGrid>
                            </td>
                            <td width="2%">
                                <br/> 
                            </td>
                            <td>
                            <h:panelGrid id="gridAjout3" columns="1" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="ajoutTypecarburantModele" value="Type de carburant :"/>
                                <p:selectOneListbox id="ajoutTypecarburantModele" scrollHeight="75" value="#{vehiculeMBean.typecarburant}"  filter="true"  converter="omnifaces.SelectItemsConverter" styleClass="ajoutTypecarburantModele"  style="width:175px">
                                    <f:selectItems value="#{modeleMBean.listeTypeCarburant}" var="ls" itemLabel="#{ls.libelleTypeCarburant}" itemValue="#{ls}"/>
                                </p:selectOneListbox>
                                <p:commandButton style="width:175px;" icon="ui-icon-plus" value="     Ajouter    " onclick="PF('typeCarburantDlg').show()"/>
                                <p:message for="ajoutTypecarburantModele" display="icon"/>
                            </h:panelGrid>
                            </td>
                            <td width="2%">
                                <br/> 
                            </td>
                            <td>
                            <h:panelGrid id="gridAjout4" columns="3" cellspacing="10" cellpadding="10">
                                <p:outputLabel for="designationModeleAjout" value="Désignation :"/>
                                <p:inputText id="designationModeleAjout" style="background: #ffffff"  styleClass="designationModeleAjout"  value="#{vehiculeMBean.designation}"  />
                                <p:message for="designationModeleAjout" display="icon"/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>
                                <p:outputLabel value=""/>
                                <p:outputLabel for="parametreVidangeModeleAjout" value="Kilometrage de vidange :"/>
                                <p:inputText id="parametreVidangeModeleAjout" style="background: #ffffff"  styleClass="parametreVidangeModeleAjout"  value="#{vehiculeMBean.parametreVidange}" />
                                <p:message for="parametreVidangeModeleAjout" display="icon"/>
                            </h:panelGrid>
                            </td>
                            </tr>
                        </table>
                        <br/>
                        <h:panelGrid columns="6">
                            <p:commandButton  style="margin-right: 8px; background: #4bcaff; color: white"   actionListener="#{vehiculeMBean.confirmerEnregistrementModele()}" value="Valider" icon="ui-icon-disk" class="btn btn-primary btn-lg"/>
                            <br/><br/>
                            <p:commandButton  style="margin-right: 8px; background: #999; color: white"  update="@(.fieldAjoutModele, .classModeleAjout)" actionListener="#{vehiculeMBean.effacerModele()}"  value="Annuler" icon="ui-icon-cancel" class="btn btn-primary btn-lg"/>
                            <br/><br/> 
                            <!--process="@this @(.typeVehicule, .marque, .designationModeleAjout, .parametreVidangeModeleAjout, .ajoutTypecarburantModele)"-->
                        </h:panelGrid>
                    </p:fieldset>
                    <p:dataTable var="vf" value="#{vehiculeMBean.listeModele}" 
                                 rowKey="#{vf.idModele}"
                                 emptyMessage="Aucun Modele" selectionMode="single"
                                 rows="3" scrollable="false"  paginator="true" paginatorPosition="top" 
                                 styleClass="classModeleAjout">
                        <!--<p:ajax event="rowDblselect" update="@(.fieldModele)" listener="#modeleMBean.rowSelect()}" />-->
                        <f:facet name="header">
                            <h:outputText value="LISTE DES MODELE"/>
                        </f:facet>
                        <p:column filterBy="#{vf.designation}" sortBy="#{vf.designation}" >
                            <f:facet name="header"> <h:outputText value=" Désignation "/> </f:facet>
                            <center>
                                <h:outputText value="#{vf.designation}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{vf.idMarque.libelleMarque}" sortBy="#{vf.idMarque.libelleMarque}">
                            <f:facet name="header"> <h:outputText value=" Marque "/> </f:facet>
                            <center>
                                <h:outputText value="#{vf.idMarque.libelleMarque}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{vf.idTypeVehicule.libelleTypeVehicule}" sortBy="#{vf.idTypeVehicule.libelleTypeVehicule}" >
                            <f:facet name="header"> <h:outputText value=" Type de véhicule "/> </f:facet>
                            <center>
                                <h:outputText value="#{vf.idTypeVehicule.libelleTypeVehicule}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{vf.parametreVidange}" sortBy="#{vf.parametreVidange}">
                            <f:facet name="header"> <h:outputText value=" Paramètre vidange "/> </f:facet>
                            <center>
                                <h:outputText value="#{vf.parametreVidange}"  ></h:outputText>
                            </center>
                        </p:column>
                        <p:column filterBy="#{vf.idTypeCarburant.libelleTypeCarburant}" sortBy="#{vf.idTypeCarburant.libelleTypeCarburant}" >
                            <f:facet name="header"> <h:outputText value=" Type de carburant"/> </f:facet>
                            <center>
                                <h:outputText value="#{vf.idTypeCarburant.libelleTypeCarburant}" ></h:outputText>
                            </center>
                        </p:column>
                    </p:dataTable>
                    <!--<p:commandButton actionListener="#vehiculeMBean.rafraichir()}" value="FERMER"/>-->
                </center>    

            </h:form>

        </p:dialog>





        <p:dialog widgetVar="marqueDlg" width="450" height="350" closable="true" header="Enregistrement de marque" draggable="true" id="marqueDlg" modal="true">
            <h:form>
                <p:messages id="messages1" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panel>
                    <center>
                        <h:panelGrid id="gridMarque" columns="2" cellspacing="5">
                            <p:outputLabel for="marque" value="Marque :"/>
                            <p:inputText id="marque" style="background: #ffffff" styleClass="marque" value="#{modeleMBean.formMarque.libelleMarque}"  />

                        </h:panelGrid>
                        <br/>
                        <br/>
                        <h:panelGrid columns="6">

                            <p:commandButton style="margin-right: 8px; background: #4bcaff; color: white" 
                                             process="marque @this" update="messages1, @(.marqueModele, .marque, .classMarque, .fieldVehicule, .gridVehicule2)"
                                             action="#{modeleMBean.enregistrerMarque()}" value="Valider" icon="ui-icon-disk" class="btn btn-primary btn-lg"/>

                        </h:panelGrid>
                        <br/>
                        <br/>
                        <p:dataTable var="mar" value="#{modeleMBean.listeMarque}" 
                                     rowKey="#{mar.idMarque}"
                                     emptyMessage="Aucune Marque" selectionMode="single"
                                     rows="3" paginator="true" paginatorPosition="top" 
                                     styleClass="classMarque">
                            <f:facet name="header">
                                <h:outputText value="LISTE DES MARQUES"/>
                            </f:facet>
                            <p:column >
                                <f:facet name="header"> <h:outputText value=" Marque "/> </f:facet>
                                <center>
                                    <h:outputText value="#{mar.libelleMarque}"  ></h:outputText>
                                </center>
                            </p:column>
                        </p:dataTable>
                    </center>
                </p:panel>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="typeVehiculeDlg" width="450" height="350" closable="true" header="Enregistrement de type de véhicule" draggable="true" id="typeVehiculeDlg" modal="true">
            <h:form>
                <p:messages id="messages2" showDetail="true" autoUpdate="true" closable="true" />
                <p:panel>
                    <center>
                        <h:panelGrid id="gridTypeVehicule" columns="2" cellpadding="5">
                            <p:outputLabel for="type_vehicule" value="Type de véhicule :"/>
                            <p:inputText id="type_vehicule" style="background: #ffffff" styleClass="type_vehicule" value="#{modeleMBean.formTypeVehicule.libelleTypeVehicule}" />
                        </h:panelGrid>
                        <br/>
                        <br/>
                        <h:panelGrid columns="6">
                            <p:commandButton style="margin-right: 8px; background: #4bcaff; color: white" process="type_vehicule @this" update="messages2, @(.typeVehiculeModele, .type_vehicule, .classTypeVeh, .fieldVehicule)" action="#{modeleMBean.enregistrerTypeVehicule()}" value="Valider" icon="ui-icon-disk" class="btn btn-primary btn-lg"/>
                        </h:panelGrid>
                        <br/>
                        <br/>
                        <p:dataTable var="tv" value="#{modeleMBean.listeTypeVehicule}" 
                                     rowKey="#tv.idTypeVehicule}"
                                     emptyMessage="Aucun type de véhicule" 
                                     rows="3"  paginator="true" paginatorPosition="top" 
                                     styleClass="classTypeVeh" >
                            <f:facet name="header">
                                <h:outputText value="LISTE DES TYPES DE VEHICULES"/>
                            </f:facet>
                            <p:column >
                                <f:facet name="header"> <h:outputText value=" Type Vehicule "/> </f:facet>
                                <center>
                                    <h:outputText value="#{tv.libelleTypeVehicule}"  ></h:outputText>
                                </center>
                            </p:column>
                        </p:dataTable>
                    </center>
                </p:panel>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="typeCarburantDlg" width="450" height="350" closable="true" header="Enregistrement de type de carburant" draggable="true" id="typeCarburantDlg" modal="true">
            <h:form>
                <p:messages id="messages3" showDetail="true" autoUpdate="true" closable="true" />
                <p:panel>
                    <center>
                        <h:panelGrid id="gridTypeCarburant" columns="2" cellpadding="5">
                            <p:outputLabel for="type_carburant" value="Type de carburant :"/>
                            <p:inputText id="type_carburant" style="background: #ffffff" styleClass="type_carburant" value="#{modeleMBean.formTypeCarburant.libelleTypeCarburant}" />
                        </h:panelGrid>
                        <br/>
                        <br/>
                        <h:panelGrid columns="6">
                            <p:commandButton style="margin-right: 8px; background: #4bcaff; color: white" process="type_carburant @this" update="messages3, @(.typecarburantModele, .type_carburant, .classTypeCar)" action="#{modeleMBean.enregistrerTypeCarburant()}" value="Valider" icon="ui-icon-disk" class="btn btn-primary btn-lg"/>
                        </h:panelGrid>
                        <br/>
                        <br/>
                        <p:dataTable var="f" value="#{modeleMBean.listeTypeCarburant}" 
                                      rowKey="#{f.idTypeCarburant}"
                                     emptyMessage="Aucun type de carburant" 
                                     rows="3"  paginator="true" paginatorPosition="top" 
                                     styleClass="classTypeCar" >
                            <f:facet name="header">
                                <h:outputText value="LISTE DES TYPES DE CARBURANT"/>
                            </f:facet>
                            <p:column >
                                <f:facet name="header"> <h:outputText value=" Type carburant "/> </f:facet>
                                <center>
                                    <h:outputText value="#{f.libelleTypeCarburant}"  ></h:outputText>
                                </center>
                            </p:column>
                        </p:dataTable>
                    </center>
                </p:panel>
            </h:form>
        </p:dialog>




    </h:body>

</html>

